name: Example workflow

on:
  workflow_dispatch:
    inputs:
      GH_ENVIRONMENT:
        description: Environment
        type: choice
        options:
          - sandbox
        default: sandbox
      TERRAFORM_ACTION:
        description: Terraform action
        type: choice
        options:
          - apply
          - destroy
        default: apply

jobs:
  ci:
    name: CI
    runs-on: ubuntu-latest
    steps:
      - run: echo Placeholder for CI stuff
  
  # MAKE SURE YOU CHANGE THE PATH!
  infra:
    name: Provision infrastructure
    needs: ci
    # CHANGE THIS PATH!
    uses: iveylabs/JM-Template-Repo/.github/workflows/infra-template.yml@main
    with:
      GH_ENVIRONMENT: ${{ github.event.inputs.GH_ENVIRONMENT }}
      TERRAFORM_ACTION: ${{ github.event.inputs.TERRAFORM_ACTION }}
      APP_NAME: bluehydrogenabacus
      APP_PROJECT: DSOPS
      APP_LOCATION: northeurope
      APP_REGION_SHORT: EU
      APP_SUFFIX: 001
      TAG_COUNTRY: UK
      TAG_ENVIRONMENT: SBX-DSOPS-EMEA
      TAG_MAINT_WINDOW: NOT REQUIRED
      TAG_SECTOR: NONE
      TAG_COST_CENTER: 012345
      TAG_APP_OWNER: paul ivey
      TAG_CLASSIFICATION: internal
      TAG_SERVICE_CLASS: platinum
